!function(n){function r(e){if(t[e])return t[e].exports;var i=t[e]={i:e,l:!1,exports:{}};return n[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}var t={};r.m=n,r.c=t,r.i=function(n){return n},r.d=function(n,t,e){r.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:e})},r.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(t,"a",t),t},r.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},r.p="",r(r.s=0)}([function(n,r){function t(n,r){return n.length===r.length&&n.every(function(n,t){return n===r[t]})}var e=function(n){return n.reduce(function(n,r){return n+r},0)},i=new Map;i.set(3,1),i.set(4,0),i.set(5,2);var s=function(){function n(n){var r=this;this.scan=function(){if(r.updateScanner()){r.delay&&(r.message={type:"update",grid:r.grid,scanner:r.scanner,hints:r.hints},postMessage(r.message)),r.isError=!0;var n=r.scanner,t=n.direction,e=n.i;r.currentHints=r.hints[t][e],r.currentHints.unchanged=!0,r.currentLine=r.getSingleLine(t,e);if(r.currentLine.every(function(n){return 2!==n})||(r.solveSingleLine(),r.setBackToGrid(r.currentLine)),r.isLineCorrect(t,e)&&(r.hints[t][e].isCorrect=!0,r.isError=!1),r.isError)return r.message={type:"error",grid:r.grid,scanner:r.scanner,hints:r.hints},void postMessage(r.message);r.delay?setTimeout(r.scan,r.delay):r.scan()}},this.hints=n.hints,this.delay=n.delay,this.grid=n.grid,this.scanner={direction:"row",i:-1},this.possibleBlanks={row:[],column:[]},this.scan()}return n.prototype.getSingleLine=function(n,r){var t=[],e=this.grid.length,i=this.grid.length&&this.grid[0].length;if("row"===n)for(var s=0;s<i;s+=1)t[s]=this.grid[r][s];else if("column"===n)for(var s=0;s<e;s+=1)t[s]=this.grid[s][r];return t},n.prototype.calculateHints=function(n,r){var t=[];return this.getSingleLine(n,r).reduce(function(n,r){if(1===r)t.push(n?t.pop()+1:1);else if(0!==r)throw new Error;return 1===r},!1),t},n.prototype.isLineCorrect=function(n,r){try{return t(this.calculateHints(n,r),this.hints[n][r])}catch(n){return!1}},n.prototype.updateScanner=function(){var n;do{if(this.isError=!1,this.scanner.i+=1,void 0===this.hints[this.scanner.direction][this.scanner.i]&&(this.scanner.direction="row"===this.scanner.direction?"column":"row",this.scanner.i=0),n=this.hints[this.scanner.direction][this.scanner.i],this.hints.row.every(function(n){return!!n.unchanged})&&this.hints.column.every(function(n){return!!n.unchanged}))return this.message={type:"finish",grid:this.grid,hints:this.hints},postMessage(this.message),!1}while(n.isCorrect||n.unchanged);return!0},n.prototype.setBackToGrid=function(n){var r=this,t=this.scanner,e=t.direction,s=t.i;"row"===e?n.forEach(function(n,t){i.has(n)&&r.grid[s][t]!==i.get(n)&&(r.grid[s][t]=i.get(n),r.hints.column[t].unchanged=!1)}):"column"===e&&n.forEach(function(n,t){i.has(n)&&r.grid[t][s]!==i.get(n)&&(r.grid[t][s]=i.get(n),r.hints.row[t].unchanged=!1)})},n.prototype.solveSingleLine=function(){this.isError=!0;var n=this.scanner,r=n.direction,t=n.i;void 0===this.possibleBlanks[r][t]&&(this.possibleBlanks[r][t]=[],this.findAll(this.currentLine.length-e(this.currentHints)+1)),this.merge()},n.prototype.findAll=function(n,r,t){if(void 0===r&&(r=[]),void 0===t&&(t=0),t===this.currentHints.length){var e=r.slice(0,this.currentHints.length);e[0]-=1;var i=this.scanner,s=i.direction,o=i.i;this.possibleBlanks[s][o]&&this.possibleBlanks[s][o].push(e)}for(var o=1;o<=n;o+=1)r[t]=o,this.findAll(n-r[t],r,t+1)},n.prototype.merge=function(){var n=this,r=this.scanner,t=r.direction,e=r.i,i=this.possibleBlanks[t][e];i.forEach(function(r,t){for(var e=[],s=0;s<n.currentHints.length;s+=1)e.push.apply(e,new Array(r[s]).fill(4)),e.push.apply(e,new Array(n.currentHints[s]).fill(3));if(e.push.apply(e,new Array(n.currentLine.length-e.length).fill(4)),e.some(function(r,t){return 4===r&&1===n.currentLine[t]||3===r&&0===n.currentLine[t]}))return void delete i[t];n.isError=!1,e.forEach(function(r,t){3===r?4===n.currentLine[t]?n.currentLine[t]=5:2===n.currentLine[t]&&(n.currentLine[t]=3):4===r&&(3===n.currentLine[t]?n.currentLine[t]=5:2===n.currentLine[t]&&(n.currentLine[t]=4))})}),this.possibleBlanks[t][e]=i.filter(function(n){return n})},n}();onmessage=function(n){new s(n.data)}}]);