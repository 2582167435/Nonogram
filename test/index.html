<style>
	body {
		background-color: #ffd;
	}
</style>
<div>
	<input type="number" id="m" min="1" max="20" step="1" value="6">
	<input type="number" id="n" min="1" max="20" step="1" value="6">
	<input type="range" id="threshold" min="0" max="1" step="0.01" value="0.5">
</div>
<canvas></canvas>
<canvas id="x"></canvas>
<canvas></canvas>
<script src="nonogram.js"></script>
<script>
function $(selector) {
  return document.querySelector(selector)
}
function $$(selector) {
  return document.querySelectorAll(selector)
}
var canvases = $$('canvas')
function newCustomNonogram() {
  new nonogram.Editor(
    parseInt($('#m').value),
    parseInt($('#n').value),
    canvases[0],
    {
      threshold: parseFloat($('#threshold').value),
      onHintChange: function (rowHints, colHints) {
        new nonogram.Game(rowHints, colHints, 'x', {
          boldMeshGap: 3,
          onSucceed: function () {
            console.log('success')
          },
          onAnimationEnd: function () {
            console.log('animation end')
          }
        })
        new nonogram.Solver(rowHints, colHints, canvases[2])
          .solve()
          .then(function () {
            console.log('success')
          })
          .catch(function () {
            console.log('error')
          })
      },
    }
  )
}
$('#m').addEventListener('change', newCustomNonogram)
$('#n').addEventListener('change', newCustomNonogram)
$('#threshold').addEventListener('change', newCustomNonogram)
newCustomNonogram()
</script>