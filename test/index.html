<script src="nonogram.js"></script>
<input type="number" id="m" min="1" max="20" step="1" value="6">
<input type="number" id="n" min="1" max="20" step="1" value="6">
<input type="range" id="threshold" min="0" max="1" step="0.01" value="0.5">
<canvas></canvas>
<canvas id="x"></canvas>
<canvas></canvas>
<script>
function $(selector) {
  return document.querySelector(selector)
}
function $$(selector) {
  return document.querySelectorAll(selector)
}
var canvases = $$('canvas')
function newCustomNonogram() {
  new nonogram.Edit(
    parseInt($('#m').value),
    parseInt($('#n').value),
    canvases[0],
    {threshold: parseFloat($('#threshold').value)}
  )
}
canvases[0].addEventListener('hintchange', function () {
  new nonogram.Play(this.nonogram.rowHints, this.nonogram.colHints, 'x', {
    boldMeshGap: 3,
  })
  new nonogram.Solve(this.nonogram.rowHints, this.nonogram.colHints, canvases[2]).solve()
})
$('#m').addEventListener('change', newCustomNonogram)
$('#n').addEventListener('change', newCustomNonogram)
$('#threshold').addEventListener('change', newCustomNonogram)
newCustomNonogram()
</script>
